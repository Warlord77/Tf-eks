{"format_version":"0.1","terraform_version":"0.15.4","variables":{"cluster-name":{"value":"test"},"environment":{"value":"prod"},"name":{"value":"test"},"subids":{"value":["subnet-550f1a3d","subnet-93cdb6df"]},"vpcid":{"value":"vpc-2a3bd741"}},"planned_values":{"outputs":{"eks_cluster_certificate_authority":{"sensitive":false},"eks_cluster_endpoint":{"sensitive":false}},"root_module":{"resources":[{"address":"aws_eks_cluster.demo","mode":"managed","type":"aws_eks_cluster","name":"demo","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"enabled_cluster_log_types":null,"encryption_config":[],"name":"test","tags":null,"timeouts":null,"vpc_config":[{"endpoint_private_access":false,"endpoint_public_access":true,"security_group_ids":null,"subnet_ids":["subnet-550f1a3d","subnet-93cdb6df"]}]}},{"address":"aws_eks_node_group.main","mode":"managed","type":"aws_eks_node_group","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"cluster_name":"test","force_update_version":null,"instance_types":["t2.medium"],"labels":null,"launch_template":[],"node_group_name":"demo-k8s","remote_access":[],"scaling_config":[{"desired_size":1,"max_size":1,"min_size":1}],"subnet_ids":["subnet-550f1a3d","subnet-93cdb6df"],"tags":{"Environment":"prod","Name":"test-prod-eks-node-group"},"tags_all":{"Environment":"prod","Name":"test-prod-eks-node-group"},"taint":[],"timeouts":null}},{"address":"aws_iam_role.demo_eks_node_group_role","mode":"managed","type":"aws_iam_role","name":"demo_eks_node_group_role","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"assume_role_policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Principal\": {\n        \"Service\": [\n          \"ec2.amazonaws.com\"\n          ]\n      },\n      \"Action\": \"sts:AssumeRole\"\n    }\n  ]\n}\n","description":null,"force_detach_policies":true,"max_session_duration":3600,"name":"test-eks-node-group-role","name_prefix":null,"path":"/","permissions_boundary":null,"tags":null}},{"address":"aws_iam_role.eks_cluster_role","mode":"managed","type":"aws_iam_role","name":"eks_cluster_role","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"assume_role_policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Principal\": {\n        \"Service\": [\n          \"eks.amazonaws.com\",\n          \"eks-fargate-pods.amazonaws.com\"\n          ]\n      },\n      \"Action\": \"sts:AssumeRole\"\n    }\n  ]\n}\n","description":null,"force_detach_policies":true,"max_session_duration":3600,"name":"test-eks-cluster-role","name_prefix":null,"path":"/","permissions_boundary":null,"tags":null}},{"address":"aws_iam_role_policy_attachment.AmazonEC2ContainerRegistryReadOnly","mode":"managed","type":"aws_iam_role_policy_attachment","name":"AmazonEC2ContainerRegistryReadOnly","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"policy_arn":"arn:aws:iam::aws:policy/AmazonEC2ContainerRegistryReadOnly","role":"test-eks-node-group-role"}},{"address":"aws_iam_role_policy_attachment.AmazonEKSClusterPolicy","mode":"managed","type":"aws_iam_role_policy_attachment","name":"AmazonEKSClusterPolicy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"policy_arn":"arn:aws:iam::aws:policy/AmazonEKSClusterPolicy","role":"test-eks-cluster-role"}},{"address":"aws_iam_role_policy_attachment.AmazonEKSServicePolicy","mode":"managed","type":"aws_iam_role_policy_attachment","name":"AmazonEKSServicePolicy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"policy_arn":"arn:aws:iam::aws:policy/AmazonEKSServicePolicy","role":"test-eks-cluster-role"}},{"address":"aws_iam_role_policy_attachment.AmazonEKSWorkerNodePolicy","mode":"managed","type":"aws_iam_role_policy_attachment","name":"AmazonEKSWorkerNodePolicy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"policy_arn":"arn:aws:iam::aws:policy/AmazonEKSWorkerNodePolicy","role":"test-eks-node-group-role"}},{"address":"aws_iam_role_policy_attachment.AmazonEKS_CNI_Policy","mode":"managed","type":"aws_iam_role_policy_attachment","name":"AmazonEKS_CNI_Policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"policy_arn":"arn:aws:iam::aws:policy/AmazonEKS_CNI_Policy","role":"test-eks-node-group-role"}},{"address":"aws_security_group.demo-cluster","mode":"managed","type":"aws_security_group","name":"demo-cluster","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"description":"Cluster communication with worker nodes","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"name":"terraform-eks-demo-cluster","revoke_rules_on_delete":false,"tags":{"Name":"terraform-eks-demo"},"tags_all":{"Name":"terraform-eks-demo"},"timeouts":null,"vpc_id":"vpc-2a3bd741"}},{"address":"aws_security_group.demo-node","mode":"managed","type":"aws_security_group","name":"demo-node","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"description":"Security group for all nodes in the cluster","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"name":"terraform-eks-demo-node","revoke_rules_on_delete":false,"tags":{"Name":"terraform-eks-demo-node","kubernetes.io/cluster/test":"owned"},"tags_all":{"Name":"terraform-eks-demo-node","kubernetes.io/cluster/test":"owned"},"timeouts":null,"vpc_id":"vpc-2a3bd741"}},{"address":"aws_security_group_rule.demo-cluster-ingress-node-https","mode":"managed","type":"aws_security_group_rule","name":"demo-cluster-ingress-node-https","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":2,"values":{"cidr_blocks":null,"description":"Allow pods to communicate with the cluster API Server","from_port":443,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","self":false,"to_port":443,"type":"ingress"}},{"address":"aws_security_group_rule.demo-cluster-ingress-workstation-https","mode":"managed","type":"aws_security_group_rule","name":"demo-cluster-ingress-workstation-https","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":2,"values":{"cidr_blocks":["0.0.0.0/0"],"description":"Allow workstation to communicate with the cluster API Server","from_port":443,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","self":false,"to_port":443,"type":"ingress"}},{"address":"aws_security_group_rule.demo-node-ingress-cluster","mode":"managed","type":"aws_security_group_rule","name":"demo-node-ingress-cluster","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":2,"values":{"cidr_blocks":null,"description":"Allow worker Kubelets and pods to receive communication from the cluster control plane","from_port":1025,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","self":false,"to_port":65535,"type":"ingress"}},{"address":"aws_security_group_rule.demo-node-ingress-self","mode":"managed","type":"aws_security_group_rule","name":"demo-node-ingress-self","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":2,"values":{"cidr_blocks":null,"description":"Allow node to communicate with each other","from_port":0,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","self":false,"to_port":65535,"type":"ingress"}},{"address":"local_file.kubeconfig","mode":"managed","type":"local_file","name":"kubeconfig","provider_name":"registry.terraform.io/hashicorp/local","schema_version":0,"values":{"content":"","content_base64":null,"directory_permission":"0777","file_permission":"0777","filename":"/home/sahiljo/.kube/config","sensitive_content":null,"source":null}}]}},"resource_changes":[{"address":"aws_eks_cluster.demo","mode":"managed","type":"aws_eks_cluster","name":"demo","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"enabled_cluster_log_types":null,"encryption_config":[],"name":"test","tags":null,"timeouts":null,"vpc_config":[{"endpoint_private_access":false,"endpoint_public_access":true,"security_group_ids":null,"subnet_ids":["subnet-550f1a3d","subnet-93cdb6df"]}]},"after_unknown":{"arn":true,"certificate_authority":true,"created_at":true,"encryption_config":[],"endpoint":true,"id":true,"identity":true,"kubernetes_network_config":true,"platform_version":true,"role_arn":true,"status":true,"tags_all":true,"version":true,"vpc_config":[{"cluster_security_group_id":true,"public_access_cidrs":true,"subnet_ids":[false,false],"vpc_id":true}]},"before_sensitive":false,"after_sensitive":{"certificate_authority":[],"encryption_config":[],"identity":[],"kubernetes_network_config":[],"tags_all":{},"vpc_config":[{"public_access_cidrs":[],"subnet_ids":[false,false]}]}}},{"address":"aws_eks_node_group.main","mode":"managed","type":"aws_eks_node_group","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"cluster_name":"test","force_update_version":null,"instance_types":["t2.medium"],"labels":null,"launch_template":[],"node_group_name":"demo-k8s","remote_access":[],"scaling_config":[{"desired_size":1,"max_size":1,"min_size":1}],"subnet_ids":["subnet-550f1a3d","subnet-93cdb6df"],"tags":{"Environment":"prod","Name":"test-prod-eks-node-group"},"tags_all":{"Environment":"prod","Name":"test-prod-eks-node-group"},"taint":[],"timeouts":null},"after_unknown":{"ami_type":true,"arn":true,"capacity_type":true,"disk_size":true,"id":true,"instance_types":[false],"launch_template":[],"node_group_name_prefix":true,"node_role_arn":true,"release_version":true,"remote_access":[],"resources":true,"scaling_config":[{}],"status":true,"subnet_ids":[false,false],"tags":{},"tags_all":{},"taint":[],"version":true},"before_sensitive":false,"after_sensitive":{"instance_types":[false],"launch_template":[],"remote_access":[],"resources":[],"scaling_config":[{}],"subnet_ids":[false,false],"tags":{},"tags_all":{},"taint":[]}}},{"address":"aws_iam_role.demo_eks_node_group_role","mode":"managed","type":"aws_iam_role","name":"demo_eks_node_group_role","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assume_role_policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Principal\": {\n        \"Service\": [\n          \"ec2.amazonaws.com\"\n          ]\n      },\n      \"Action\": \"sts:AssumeRole\"\n    }\n  ]\n}\n","description":null,"force_detach_policies":true,"max_session_duration":3600,"name":"test-eks-node-group-role","name_prefix":null,"path":"/","permissions_boundary":null,"tags":null},"after_unknown":{"arn":true,"create_date":true,"id":true,"inline_policy":true,"managed_policy_arns":true,"tags_all":true,"unique_id":true},"before_sensitive":false,"after_sensitive":{"inline_policy":[],"managed_policy_arns":[],"tags_all":{}}}},{"address":"aws_iam_role.eks_cluster_role","mode":"managed","type":"aws_iam_role","name":"eks_cluster_role","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assume_role_policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Principal\": {\n        \"Service\": [\n          \"eks.amazonaws.com\",\n          \"eks-fargate-pods.amazonaws.com\"\n          ]\n      },\n      \"Action\": \"sts:AssumeRole\"\n    }\n  ]\n}\n","description":null,"force_detach_policies":true,"max_session_duration":3600,"name":"test-eks-cluster-role","name_prefix":null,"path":"/","permissions_boundary":null,"tags":null},"after_unknown":{"arn":true,"create_date":true,"id":true,"inline_policy":true,"managed_policy_arns":true,"tags_all":true,"unique_id":true},"before_sensitive":false,"after_sensitive":{"inline_policy":[],"managed_policy_arns":[],"tags_all":{}}}},{"address":"aws_iam_role_policy_attachment.AmazonEC2ContainerRegistryReadOnly","mode":"managed","type":"aws_iam_role_policy_attachment","name":"AmazonEC2ContainerRegistryReadOnly","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"policy_arn":"arn:aws:iam::aws:policy/AmazonEC2ContainerRegistryReadOnly","role":"test-eks-node-group-role"},"after_unknown":{"id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"aws_iam_role_policy_attachment.AmazonEKSClusterPolicy","mode":"managed","type":"aws_iam_role_policy_attachment","name":"AmazonEKSClusterPolicy","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"policy_arn":"arn:aws:iam::aws:policy/AmazonEKSClusterPolicy","role":"test-eks-cluster-role"},"after_unknown":{"id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"aws_iam_role_policy_attachment.AmazonEKSServicePolicy","mode":"managed","type":"aws_iam_role_policy_attachment","name":"AmazonEKSServicePolicy","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"policy_arn":"arn:aws:iam::aws:policy/AmazonEKSServicePolicy","role":"test-eks-cluster-role"},"after_unknown":{"id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"aws_iam_role_policy_attachment.AmazonEKSWorkerNodePolicy","mode":"managed","type":"aws_iam_role_policy_attachment","name":"AmazonEKSWorkerNodePolicy","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"policy_arn":"arn:aws:iam::aws:policy/AmazonEKSWorkerNodePolicy","role":"test-eks-node-group-role"},"after_unknown":{"id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"aws_iam_role_policy_attachment.AmazonEKS_CNI_Policy","mode":"managed","type":"aws_iam_role_policy_attachment","name":"AmazonEKS_CNI_Policy","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"policy_arn":"arn:aws:iam::aws:policy/AmazonEKS_CNI_Policy","role":"test-eks-node-group-role"},"after_unknown":{"id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"aws_security_group.demo-cluster","mode":"managed","type":"aws_security_group","name":"demo-cluster","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Cluster communication with worker nodes","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"name":"terraform-eks-demo-cluster","revoke_rules_on_delete":false,"tags":{"Name":"terraform-eks-demo"},"tags_all":{"Name":"terraform-eks-demo"},"timeouts":null,"vpc_id":"vpc-2a3bd741"},"after_unknown":{"arn":true,"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"id":true,"ingress":true,"name_prefix":true,"owner_id":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[],"tags":{},"tags_all":{}}}},{"address":"aws_security_group.demo-node","mode":"managed","type":"aws_security_group","name":"demo-node","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Security group for all nodes in the cluster","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"name":"terraform-eks-demo-node","revoke_rules_on_delete":false,"tags":{"Name":"terraform-eks-demo-node","kubernetes.io/cluster/test":"owned"},"tags_all":{"Name":"terraform-eks-demo-node","kubernetes.io/cluster/test":"owned"},"timeouts":null,"vpc_id":"vpc-2a3bd741"},"after_unknown":{"arn":true,"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"id":true,"ingress":true,"name_prefix":true,"owner_id":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[],"tags":{},"tags_all":{}}}},{"address":"aws_security_group_rule.demo-cluster-ingress-node-https","mode":"managed","type":"aws_security_group_rule","name":"demo-cluster-ingress-node-https","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"cidr_blocks":null,"description":"Allow pods to communicate with the cluster API Server","from_port":443,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","self":false,"to_port":443,"type":"ingress"},"after_unknown":{"id":true,"security_group_id":true,"source_security_group_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"aws_security_group_rule.demo-cluster-ingress-workstation-https","mode":"managed","type":"aws_security_group_rule","name":"demo-cluster-ingress-workstation-https","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"cidr_blocks":["0.0.0.0/0"],"description":"Allow workstation to communicate with the cluster API Server","from_port":443,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","self":false,"to_port":443,"type":"ingress"},"after_unknown":{"cidr_blocks":[false],"id":true,"security_group_id":true,"source_security_group_id":true},"before_sensitive":false,"after_sensitive":{"cidr_blocks":[false]}}},{"address":"aws_security_group_rule.demo-node-ingress-cluster","mode":"managed","type":"aws_security_group_rule","name":"demo-node-ingress-cluster","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"cidr_blocks":null,"description":"Allow worker Kubelets and pods to receive communication from the cluster control plane","from_port":1025,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","self":false,"to_port":65535,"type":"ingress"},"after_unknown":{"id":true,"security_group_id":true,"source_security_group_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"aws_security_group_rule.demo-node-ingress-self","mode":"managed","type":"aws_security_group_rule","name":"demo-node-ingress-self","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"cidr_blocks":null,"description":"Allow node to communicate with each other","from_port":0,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","self":false,"to_port":65535,"type":"ingress"},"after_unknown":{"id":true,"security_group_id":true,"source_security_group_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"local_file.kubeconfig","mode":"managed","type":"local_file","name":"kubeconfig","provider_name":"registry.terraform.io/hashicorp/local","change":{"actions":["create"],"before":null,"after":{"content":"","content_base64":null,"directory_permission":"0777","file_permission":"0777","filename":"/home/sahiljo/.kube/config","sensitive_content":null,"source":null},"after_unknown":{"id":true},"before_sensitive":false,"after_sensitive":{"sensitive_content":true}}}],"output_changes":{"eks_cluster_certificate_authority":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"eks_cluster_endpoint":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false}},"prior_state":{"format_version":"0.1","terraform_version":"0.15.4","values":{"root_module":{"resources":[{"address":"data.template_file.kubeconfig","mode":"data","type":"template_file","name":"kubeconfig","provider_name":"registry.terraform.io/hashicorp/template","schema_version":0,"values":{"filename":null,"id":"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855","rendered":"","template":null,"vars":null}}]}}},"configuration":{"provider_config":{"aws":{"name":"aws","expressions":{"region":{"constant_value":"ap-south-1"}}}},"root_module":{"outputs":{"eks_cluster_certificate_authority":{"expression":{"references":["aws_eks_cluster.demo"]}},"eks_cluster_endpoint":{"expression":{"references":["aws_eks_cluster.demo"]}}},"resources":[{"address":"aws_eks_cluster.demo","mode":"managed","type":"aws_eks_cluster","name":"demo","provider_config_key":"aws","expressions":{"name":{"references":["var.cluster-name"]},"role_arn":{"references":["aws_iam_role.eks_cluster_role"]},"vpc_config":[{"subnet_ids":{"references":["var.subids"]}}]},"schema_version":0,"depends_on":["aws_iam_role_policy_attachment.AmazonEKSClusterPolicy","aws_iam_role_policy_attachment.AmazonEKSServicePolicy"]},{"address":"aws_eks_node_group.main","mode":"managed","type":"aws_eks_node_group","name":"main","provider_config_key":"aws","expressions":{"cluster_name":{"references":["aws_eks_cluster.demo"]},"instance_types":{"constant_value":["t2.medium"]},"node_group_name":{"constant_value":"demo-k8s"},"node_role_arn":{"references":["aws_iam_role.demo_eks_node_group_role"]},"scaling_config":[{"desired_size":{"constant_value":1},"max_size":{"constant_value":1},"min_size":{"constant_value":1}}],"subnet_ids":{"references":["var.subids"]},"tags":{"references":["var.name","var.environment","var.environment"]}},"schema_version":0,"depends_on":["aws_iam_role_policy_attachment.AmazonEKSWorkerNodePolicy","aws_iam_role_policy_attachment.AmazonEKS_CNI_Policy","aws_iam_role_policy_attachment.AmazonEC2ContainerRegistryReadOnly"]},{"address":"aws_iam_role.demo_eks_node_group_role","mode":"managed","type":"aws_iam_role","name":"demo_eks_node_group_role","provider_config_key":"aws","expressions":{"assume_role_policy":{"constant_value":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Principal\": {\n        \"Service\": [\n          \"ec2.amazonaws.com\"\n          ]\n      },\n      \"Action\": \"sts:AssumeRole\"\n    }\n  ]\n}\n"},"force_detach_policies":{"constant_value":true},"name":{"references":["var.name"]}},"schema_version":0},{"address":"aws_iam_role.eks_cluster_role","mode":"managed","type":"aws_iam_role","name":"eks_cluster_role","provider_config_key":"aws","expressions":{"assume_role_policy":{"constant_value":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Principal\": {\n        \"Service\": [\n          \"eks.amazonaws.com\",\n          \"eks-fargate-pods.amazonaws.com\"\n          ]\n      },\n      \"Action\": \"sts:AssumeRole\"\n    }\n  ]\n}\n"},"force_detach_policies":{"constant_value":true},"name":{"references":["var.name"]}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.AmazonEC2ContainerRegistryReadOnly","mode":"managed","type":"aws_iam_role_policy_attachment","name":"AmazonEC2ContainerRegistryReadOnly","provider_config_key":"aws","expressions":{"policy_arn":{"constant_value":"arn:aws:iam::aws:policy/AmazonEC2ContainerRegistryReadOnly"},"role":{"references":["aws_iam_role.demo_eks_node_group_role"]}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.AmazonEKSClusterPolicy","mode":"managed","type":"aws_iam_role_policy_attachment","name":"AmazonEKSClusterPolicy","provider_config_key":"aws","expressions":{"policy_arn":{"constant_value":"arn:aws:iam::aws:policy/AmazonEKSClusterPolicy"},"role":{"references":["aws_iam_role.eks_cluster_role"]}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.AmazonEKSServicePolicy","mode":"managed","type":"aws_iam_role_policy_attachment","name":"AmazonEKSServicePolicy","provider_config_key":"aws","expressions":{"policy_arn":{"constant_value":"arn:aws:iam::aws:policy/AmazonEKSServicePolicy"},"role":{"references":["aws_iam_role.eks_cluster_role"]}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.AmazonEKSWorkerNodePolicy","mode":"managed","type":"aws_iam_role_policy_attachment","name":"AmazonEKSWorkerNodePolicy","provider_config_key":"aws","expressions":{"policy_arn":{"constant_value":"arn:aws:iam::aws:policy/AmazonEKSWorkerNodePolicy"},"role":{"references":["aws_iam_role.demo_eks_node_group_role"]}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.AmazonEKS_CNI_Policy","mode":"managed","type":"aws_iam_role_policy_attachment","name":"AmazonEKS_CNI_Policy","provider_config_key":"aws","expressions":{"policy_arn":{"constant_value":"arn:aws:iam::aws:policy/AmazonEKS_CNI_Policy"},"role":{"references":["aws_iam_role.demo_eks_node_group_role"]}},"schema_version":0},{"address":"aws_security_group.demo-cluster","mode":"managed","type":"aws_security_group","name":"demo-cluster","provider_config_key":"aws","expressions":{"description":{"constant_value":"Cluster communication with worker nodes"},"name":{"constant_value":"terraform-eks-demo-cluster"},"tags":{"constant_value":{"Name":"terraform-eks-demo"}},"vpc_id":{"references":["var.vpcid"]}},"schema_version":1},{"address":"aws_security_group.demo-node","mode":"managed","type":"aws_security_group","name":"demo-node","provider_config_key":"aws","expressions":{"description":{"constant_value":"Security group for all nodes in the cluster"},"name":{"constant_value":"terraform-eks-demo-node"},"tags":{"references":["var.cluster-name"]},"vpc_id":{"references":["var.vpcid"]}},"schema_version":1},{"address":"aws_security_group_rule.demo-cluster-ingress-node-https","mode":"managed","type":"aws_security_group_rule","name":"demo-cluster-ingress-node-https","provider_config_key":"aws","expressions":{"description":{"constant_value":"Allow pods to communicate with the cluster API Server"},"from_port":{"constant_value":443},"protocol":{"constant_value":"tcp"},"security_group_id":{"references":["aws_security_group.demo-cluster"]},"source_security_group_id":{"references":["aws_security_group.demo-node"]},"to_port":{"constant_value":443},"type":{"constant_value":"ingress"}},"schema_version":2},{"address":"aws_security_group_rule.demo-cluster-ingress-workstation-https","mode":"managed","type":"aws_security_group_rule","name":"demo-cluster-ingress-workstation-https","provider_config_key":"aws","expressions":{"cidr_blocks":{"constant_value":["0.0.0.0/0"]},"description":{"constant_value":"Allow workstation to communicate with the cluster API Server"},"from_port":{"constant_value":443},"protocol":{"constant_value":"tcp"},"security_group_id":{"references":["aws_security_group.demo-cluster"]},"to_port":{"constant_value":443},"type":{"constant_value":"ingress"}},"schema_version":2},{"address":"aws_security_group_rule.demo-node-ingress-cluster","mode":"managed","type":"aws_security_group_rule","name":"demo-node-ingress-cluster","provider_config_key":"aws","expressions":{"description":{"constant_value":"Allow worker Kubelets and pods to receive communication from the cluster control plane"},"from_port":{"constant_value":1025},"protocol":{"constant_value":"tcp"},"security_group_id":{"references":["aws_security_group.demo-node"]},"source_security_group_id":{"references":["aws_security_group.demo-cluster"]},"to_port":{"constant_value":65535},"type":{"constant_value":"ingress"}},"schema_version":2},{"address":"aws_security_group_rule.demo-node-ingress-self","mode":"managed","type":"aws_security_group_rule","name":"demo-node-ingress-self","provider_config_key":"aws","expressions":{"description":{"constant_value":"Allow node to communicate with each other"},"from_port":{"constant_value":0},"protocol":{"constant_value":"-1"},"security_group_id":{"references":["aws_security_group.demo-node"]},"source_security_group_id":{"references":["aws_security_group.demo-node"]},"to_port":{"constant_value":65535},"type":{"constant_value":"ingress"}},"schema_version":2},{"address":"local_file.kubeconfig","mode":"managed","type":"local_file","name":"kubeconfig","provider_config_key":"local","expressions":{"content":{"references":["data.template_file.kubeconfig"]},"filename":{}},"schema_version":0},{"address":"data.template_file.kubeconfig","mode":"data","type":"template_file","name":"kubeconfig","provider_config_key":"template","expressions":{"vars":{"constant_value":{}}},"schema_version":0}],"variables":{"cluster-name":{"default":"test"},"environment":{"default":"prod"},"name":{"default":"test"},"subids":{"default":["subnet-550f1a3d","subnet-93cdb6df"]},"vpcid":{"default":"vpc-2a3bd741"}}}}}
